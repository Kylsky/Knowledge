以下为抢课脚本，仅做个人使用，切勿用于任何商业行为。

````
import requests
import smtplib
import json
from email.mime.text import MIMEText
import time
import datetime
from datetime import datetime


def time_stamp_int(time_str):
    datetime_obj = datetime.strptime(time_str, "%Y-%m-%d %H:%M:%S.%f")
    obj_stamp = int(time.mktime(datetime_obj.timetuple()) * 1000.0 + datetime_obj.microsecond / 1000.0)
    return obj_stamp


# 1.配置smtp
mail_host = ''
mail_user = ''
mail_pass = ""

# 2.配置发送人和接收人邮箱，接收人可以配多个，用逗号隔开
sender = ''
receivers = ''

# 3.配置默认的缓存id(登陆接口返回)，这里不配置应该也行，没试过
successId = ""

current_time_stamp_milli = str(time_stamp_int(str(datetime.utcnow())))

# 课程列表的url拼接规则：
# classListUrl + current_time_stamp_milli
classListUrl = 'https://www.hzqsn.com/webClass/classList?_t='

# 登陆页面的url拼接规则：
# indexUrl + current_time_stamp_milli
indexUrl = 'https://www.hzqsn.com/index?_t='

# 健康检查的url拼接规则：
# getHealthDetailUrl + current_time_stamp_milli + getHealthDetailUrlParam + mySuccessId
getHealthDetailUrl = 'https://www.hzqsn.com/studentApp/getHealthDetail?_t='

# 抢课页面的url拼接规则：
# catchClassUrl + current_time_stamp_milli
catchClassUrl = 'https://www.hzqsn.com/applyweb/enlistClass?_t='

getHealthDetailUrlParam = '&successID='

# 4.配置cookie，登陆后通过F12获取
myCookie = ""

# 5.配置筛选条件，选课界面点击按钮后根据接口发送对应参数传，分页参数可以传大一点，以查询全部课程
myData = {
    "campusid": ,
    "sexType": ,
    "minAge": "",
    "page": ,
    "pageSize": ,
    "term": 
}

# 6.配置登陆的用户名和密码，可以在登陆界面通过F12看到加密后的密码
loginData = {
    'cardNo': '',
    'password': ''
}

# 7.配置请求头
# 请求头
kv = {'user-agent': 'Mozilla/5.0',
      "ContentType": "application/x-www-form-urlencoded;charset=UTF-8",
      "Cookie": myCookie
      }


# 开始任务
def timer(n):
    mySuccessId = successId
    print("\n")
    while True:
        response = requests.post(classListUrl + current_time_stamp_milli,
                                 data=myData,
                                 headers=kv
                                 )

        print('request url =' + response.request.url)
        response.encoding = 'utf-8'
        classResponse = json.loads(response.text)
        print("\n")
        # code为-1 ，调用失败，code为1 ，则调用成功，开始检查msg中课程内容
        print('response length:' + str(len(classResponse)))
        print('response code: ' + classResponse['code'])
        print("\n")
        if len(classResponse) > 1:
            for item in classResponse:
                # code为1时，请求通过
                if item == 'code' and classResponse[item] != '-1':
                    try:
                        # 8.配置需要选课的关键词
                        course1 = "运动" in response.text
                        course2 = "美术" in response.text
                        course3 = "体育" in response.text
                        course4 = "英语" in response.text
                        course5 = "编程" in response.text
                        course6 = "轮滑" in response.text

                        jsonObj = json.loads(response.text)
                        resultMsgJson = jsonObj['msg']
                        print('以下是所有可选课程的列表：')
                        printText = ''
                        for printIdx in range(len(resultMsgJson)):
                            printMsg = resultMsgJson[printIdx]
                            printText += "No." + str(printIdx + 1) + "\n"
                            printText += "课程名：" + printMsg['specialtyName'] + "\n"
                        print(printText)
                        # 9.这里按照第8步配置的课程，按照以下的格式进行相应的增加或删减
                        if course1 or course2 or course3 or course4 or course5 or course6:
                            print('course found')

                            #  定义需要发送的文字
                            mailText = ""
                            # 对发送文字进行拼接
                            for idx in range(len(resultMsgJson)):
                                msg = resultMsgJson[idx]
                                print('以下是匹配条件的课程列表：')
                                mailText += "No." + str(idx + 1) + "\n"
                                mailText += "专业：" + msg['accDepName'] + "\n"
                                mailText += "课程名：" + msg['specialtyName'] + "\n"
                                mailText += "班级：" + msg['name'] + "\n"
                                mailText += "说明：" + msg['subject'] + "\n"
                                mailText += "区域：" + msg['campusName'] + "\n"
                                mailText += "课时：" + str(msg['times']) + "\n"
                                mailText += "学费：" + str(msg['learnMoney']) + "\n"
                                mailText += "课程id: " + str(msg['id']) + "\n"

                                # 模拟选课，先进行健康检查，校验successId是否过期，过期则调用登录接口重新获取
                                checkHealthResponse = requests.post(
                                    getHealthDetailUrl + current_time_stamp_milli +
                                    getHealthDetailUrlParam + mySuccessId,
                                    data=loginData,
                                    headers=kv)
                                checkHealthResponse.encoding = 'utf-8'
                                checkHealthResponseDic = json.loads(checkHealthResponse.text)
                                if len(checkHealthResponseDic) > 1:
                                    # for healthItem in checkHealthResponseDic:
                                    # code为1时，请求通过
                                    # print(checkHealthResponseDic['code'])
                                    if checkHealthResponseDic['code'] == '-2' \
                                            and checkHealthResponseDic['msg'] == '缓存编号已过期':
                                        # 重新登录获取successID
                                        print('缓存编号过期，开始重新获取successId')
                                        indexResponse = requests.post(
                                            indexUrl + current_time_stamp_milli,
                                            data=loginData,
                                            headers=kv)
                                        indexResponse.encoding = 'utf-8'
                                        print('indexResponse Text :' + indexResponse.text)
                                        indexResponseDic = json.loads(indexResponse.text)
                                        print('获取到登陆信息，开始进行successId校验')
                                        print('index code :' + indexResponseDic['code'])
                                        print('index successID :' + str(indexResponseDic['msg']['successID']))
                                        if indexResponseDic['code'] == '1':
                                            mySuccessId = str(indexResponseDic['msg']['successID'])

                                    else:
                                        print("successId 有效")

                                    # 现在开始自动选课！
                                    # (该功能暂时搁置)在选课之前，对于需要报名的课程，先检查该课程是否已经报名，已经报名，则过滤
                                    catchData = {
                                        'successID': mySuccessId,
                                        'classId': msg['id'],
                                        'type': 1
                                    }
                                    catchClassResponse = requests.post(
                                        catchClassUrl + current_time_stamp_milli,
                                        data=catchData,
                                        headers=kv)
                                    catchClassResponse.encoding = 'utf-8'
                                    catchResponseDic = json.loads(catchClassResponse.text)
                                    if catchResponseDic['code'] == -1:
                                        print(catchClassResponse.text)
                                        mailText += '自动选课结果: ' + catchResponseDic['msg'] + '\n'
                                    else:
                                        print(catchClassResponse.text)
                                        # 如果收到邮件并包含"选课成功"，那么恭喜你啦！
                                        mailText += '选课成功！\n'
                                    mailText += "\n\n\n"

                            # 连接邮件服务器
                            smtpObj = smtplib.SMTP()
                            print("connecting to mail host")
                            smtpObj.connect(mail_host, 25)
                            print("mail host connected")

                            # 登录到邮件服务器
                            print("try to login ")
                            smtpObj.login(mail_user, mail_pass)
                            print("login success")

                            message = MIMEText(mailText, 'plain', 'utf-8')
                            message['Subject'] = "课程更新内容"
                            message['From'] = sender
                            message['To'] = receivers
                            smtpObj.sendmail(
                                sender, receivers, message.as_string())
                            print(mailText)
                            print('----------')
                            print('send mail success')
                            print('----------')
                            # 抢到课并发出邮件后停止1分钟，该休息下了～
                            time.sleep(60 * 1)
                        else:
                            print("course not found")
                            print('--------------------------------')
                            time.sleep(5)
                    except Exception as e:
                        print(e.with_traceback())
                        print('error', e)  # 打印错误
                        time.sleep(10)
                        # 关闭邮箱连接
                        smtpObj.quit()
        else:
            print('There is not any course to select, retry after 10 seconds')
            time.sleep(10)


timer(60)


````