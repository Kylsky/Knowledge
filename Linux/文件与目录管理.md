## 1.目录相关操作

<img src="http://kyle-pic.oss-cn-hangzhou.aliyuncs.com/img/image-20200826162039466.png" alt="image-20200826162039466" style="zoom:67%;" />

### 1.1 目录指令

#### 1.1.1  cd(change directory)

略

#### 1.1.2 pwd(显示目前所在的目录)

**-P** ：显 示 出 确 实 的 路 径， 而 非 使 用 链 接 （link） 路 径

#### 1.1.3 mkdir(创建新目录)

**-m** ：设 置 文 件 的 权 限 喔！ 直 接 设 置， 不 需 要 验证 默 认 权 限 （umask） 

**-p** ： 直 接 将 所 需 要 的 目 录（ 包 含 上 层 目 录） 递 归 创 建

#### 1.1.4 rmdir(删除空的目录)

**-p** ：连 同“ 上 层”“ 空 的” 目 录 也 一 起 删 除



### 1.2 文件与目录管理

#### 1.2.1文件与目录检视：ls

**-a** ：全 部 的 文 件， 连 同 隐 藏 文 件（ 开 头 为 . 的 文 件） 一 起 列 出 来（ 常 用） 

**-A** ：全 部 的 文 件， 连 同 隐 藏 文 件， 但 不 包 括 . 与 .. 这 两 个 目 录 

**-d** ：仅 列 出 目 录 本 身， 而 不 是 列 出 目 录 内 的 文 件 数 据（ 常 用） 

**-f** ：直 接 列 出 结 果， 而 不 进 行 排 序 （ls 默 认 会 以 文 件 名 排 序！） 

**-F** ：根 据 文 件、 目 录 等 信 息， 给 予 附 加 数 据 结 构， 例 如： *: 代 表 可 可 执 行 文 件； /: 代 表 目 录； =: 代 表 socket 文 件； |: 代 表 FIFO 文 件； 

**-h** ：将 文 件 大 小 以 人 类 较 易 读 的 方 式（ 例 如 GB, KB 等 等） 列 出 来； 

**-i** ：列 出 inode 号 码， inode 的 意 义 下 一 章 将 会 介 绍； 

**-l** ：长 数 据 串 行 出， 包 含 文 件 的 属 性 与 权 限 等 等 数 据；（ 常 用） 

**-n** ：列 出 UID 与 GID 而 非 使 用 者 与 群 组 的 名 称 （UID 与 GID 会 在 帐 号 管 理 提 到！） 

**-r** ：将 排 序 结 果 反 向 输 出， 例 如： 原 本 文 件 名 由 小 到 大， 反 向 则 为 由 大 到 小； 

**-R** ：连 同 子 目 录 内 容 一 起 列 出 来， 等 于 该 目 录 下 的 所 有 文 件 都 会 显 示 出 来； 

**-S** ：以 文 件 大 小 大 小 排 序， 而 不 是 用 文 件 名 排 序； 

**-t** ：依 时 间 排 序， 而 不 是 用 文 件 名。 

**--color = never** ：不 要 依 据 文 件 特 性 给 予 颜 色 显 示； 

**--color = always** ：显 示 颜 色 --color = auto ：让 系 统 自 行 依 据 设 置 来 判 断 是 否 给 予 颜 色 

**--full-time** ：以 完 整 时 间 模 式 （包 含 年、 月、 日、 时、 分） 输 出 

**--time ={ atime, ctime}** ：输 出 access 时 间 或 改 变 权 限 属 性 时 间 （ctime） 而 非 内 容 变 更 时 间



#### 1.2.2 复制：cp

```
cp [-adfilprsu] 来 源 文 件（ source） 目 标 文 件
cp [options] source1 source2 source3 .... directory
```

**-a** ：相 当 于 -dr --preserve = all 的 意 思， 至 于 dr 请 参 考 下 列 说 明；（ 常 用） 

**-d** ：若 来 源 文 件 为 链 接 文 件 的 属 性（ link file）， 则 复 制 链 接 文 件 属 性 而 非 文 件 本 身； 

**-f** ：为 强 制（ force） 的 意 思， 若 目 标 文 件 已 经 存 在 且 无 法 打 开， 则 移 除 后 再 尝 试 一 次；

**-i** ：若 目 标 文 件（ destination） 已 经 存 在 时， 在 覆 盖 时 会 先 询 问 动 作 的 进 行（ 常 用） 

**-l** ：进 行 硬 式 链 接（ hard link） 的 链 接 文 件 创 建， 而 非 复 制 文 件 本 身；

**-p** ：连 同 文 件 的 属 性（ 权 限、 用 户、 时 间） 一 起 复 制 过 去， 而 非 使 用 默 认 属 性（ 备 份 常 用）； 

**-r** ：递 回 持 续 复 制， 用 于 目 录 的 复 制 行 为；（ 常 用） 

**-s** ：复 制 成 为 符 号 链 接 文 件 （symbolic link）， 亦 即“ 捷 径” 文 件； 

**-u** ：destination 比 source 旧 才 更 新 destination， 或 destination 不 存 在 的 情 况 下 才 复 制。

**--preserve = all** ：除 了 -p 的 权 限 相 关 参 数 外， 还 加 入 SELinux 的 属 性, links, xattr 等 也 复 制 了。 最 后 需 要 注 意 的， 如 果 来 源 文 件 有 两 个 以 上， 则 最 后 一 个 目 的 文 件 一 定 要 是“ 目 录” 才 行



#### 1.2.3 删除：rm

```
rm [-fir] 文 件 或 目 录
注：在指令前加上反斜线\，可以忽略掉alias的指定选项，alias后面会讲到。
```

**-f** ：就 是 force 的 意 思， 忽 略 不 存 在 的 文 件， 不 会 出 现 警 告 讯 息； 

**-i** ：互 动 模 式， 在 删 除 前 会 询 问 使 用 者 是 否 动 作 

**-r** ：递 回 删 除 , 最 常 用 在 目 录 的 删 除 , 这 是 非 常 危 险 的 选 项



#### 1.2.4 移动：mv

```
mv [-fiu] source destination 
mv [options] source1 source2 source3 .... directory
```

**-f** ：force 强 制 的 意 思， 如 果 目 标 文 件 已 经 存 在， 不 会 询 问 而 直 接 覆 盖；

**-i** ：若 目 标 文 件 （destination） 已 经 存 在 时， 会 询 问 是 否 覆 盖

**-u** ：若 目 标 文 件 已 经 存 在， 且 source 比 较 新， 才 会 更 新 （update）



#### 1.2.5 获取文件名：basename

#### 1.2.6 获取目录名：dirname

### 1.3 文件内容查阅

#### 1.3.1 cat ：由 第 一 行 开 始 显 示 文 件 内 容 

-A ：相 当 于 -vET 的 整 合 选 项， 可 列 出 一 些 特 殊 字 符 而 不 是 空 白 而 已； 

-b ：列 出 行 号， 仅 针 对 非 空 白 行 做 行 号 显 示， 空 白 行 不 标 行 号！ 

-E ：将 结 尾 的 断 行 字 符 $ 显 示 出 来； 

-n ：打 印 出 行 号， 连 同 空 白 行 也 会 有 行 号， 与 -b 的 选 项 不 同； 

-T ：将 [tab] 按 键 以 ^ I 显 示 出 来； 

-v ：列 出 一 些 看 不 出 来 的 特 殊 字 符



#### 1.3.2 tac ：从 最 后 一 行 开 始 显 示， 可 以 看 出 tac 是 cat 的 倒 着 写



#### 1.3.3 nl ：显 示 的 时 候 输 出 行 号 

**-b** ：指 定 行 号 指 定 的 方 式， 主 要 有 两 种： 

​	-b a ：表 示 不 论 是 否 为 空 行， 也 同 样 列 出 行 号（ 类 似 cat -n）； 

​	-b t ：如 果 有 空 行， 空 的 那 一 行 不 要 列 出 行 号（ 默 认 值）； 

**-n** ：列 出 行 号 表 示 的 方 法， 主 要 有 三 种：

​	-n ln ：行 号 在 屏 幕 的 最 左 方 显 示； 

​	-n rn ：行 号 在 自 己 字 段 的 最 右 方 显 示， 且 不 加 0 ； 

​	-n rz ：行 号 在 自 己 字 段 的 最 右 方 显 示， 且 加 0 ； 

**-w** ：行 号 字 段 的 占 用 的 字 符 数。



#### 1.3.4 more： 一 页 一 页 的 显 示 文 件 内 容 

空 白 键 （space）： 代 表 向 下 翻 一 页； 

Enter ：代 表 向 下 翻“ 一 行”； /字 串 ：代 表 在 这 个 显 示 的 内 容 当 中， 向 下 搜 寻“ 字 串” 这 个 关 键 字； 

:f ：立 刻 显 示 出 文 件 名 以 及 目 前 显 示 的 行 数； 

q ：代 表 立 刻 离 开 more ，不 再 显 示 该 文 件 内 容。 

b 或 [ctrl]-b ：代 表 往 回 翻 页， 不 过 这 动 作 只 对 文 件 有 用， 对 pipeline 无 用。



#### 1.3.5 less ：与 more 类 似， 但 是 比 more 更 好 的 是， 他 可 以 往 前 翻 页 

**空 白 键** ：向 下 翻 动 一 页；

**[pagedown]**： 向 下 翻 动 一 页； 

**[pageup]** ：向 上 翻 动 一 页； /字 串 ：向 下 搜 寻“ 字 串” 的 功 能； ?字 串 ：向 上 搜 寻“ 字 串” 的 功 能； 

**n** ：重 复 前 一 个 搜 寻 （与 / 或 ? 有 关！） 

**N** ：反 向 的 重 复 前 一 个 搜 寻 （与 / 或 ? 有 关！） 

**g** ：前 进 到 这 个 数 据 的 第 一 行 去； 

**G** ：前 进 到 这 个 数 据 的 最 后 一 行 去 （注 意 大 小 写）； 

**q** ：离 开 less 这 个 程 序；



#### 1.3.6 head： 只 看 头 几 行 

head [-n number] 文 件

```
-n 选 项 后 面 的 参 数 较 有 趣， 如 果 接 的 是 负 数， 例 如 上 面 范 例 的-n -100 时， 代 表 列 前 的 所 有 行 数， 但 不 包 括 后 面 100 行。 举 例 来 说 CentOS 7.1 的 /etc/ man_db.conf 共 有 131 行， 则 上 述 的 指 令“ head -n -100 /etc/ man_db.conf” 就 会 列 出 前 面 31 行， 后 面 100 行 不 会 打 印 出 来 了。
```



#### 1.3.7 tail ：只 看 尾 巴 几 行 

tail [-n number] 文件



#### 1.3.8 od ：以 二 进 制 的 方 式 读 取 文 件 内 容

**-t** ：后 面 可 以 接 各 种“ 类 型 （TYPE）” 的 输 出， 例 如： 

​	**a** ：利 用 默 认 的 字 符 来 输 出； 

​	**c** ：使 用 ASCII 字 符 来 输 出 d[ size] ：利 用 十 进 制（ decimal） 来 输 出 数 据， 每 个 整 数 占 		用 size Bytes ； 

​	**f[ size]** ：利 用 浮 点 数 值（ floating） 来 输 出 数 据， 每 个 数 占 用 size Bytes ； 

​	**o[ size]** ：利 用 八 进 位（ octal） 来 输 出 数 据， 每 个 整 数 占 用 size Bytes ；

​	**x[ size]** ：利 用 十 六 进 制（ hexadecimal） 来 输 出 数 据， 每 个 整 数 占 用 size Bytes ；



### 1.4 修改文件时间或创建新文件：touch

```
touch [-acdmt] 文件
```

**-a** ：仅 修 订 access time； 

**-c** ：仅 修 改 文 件 的 时 间， 若 该 文 件 不 存 在 则 不 创 建 新 文 件； 

**-d** ：后 面 可 以 接 欲 修 订 的 日 期 而 不 用 目 前 的 日 期， 也 可 以 使 用 --date =" 日 期 或 时 间" 

**-m** ：仅 修 改 mtime ； 

**-t** ：后 面 可 以 接 欲 修 订 的 时 间 而 不 用 目 前 的 时 间， 格 式 为[ YYYYMMDDhhmm]



## 2.文件与目录的默认权限与隐藏权限

### 2.1 文件默认权限：umask



### 2.2 文件隐藏属性：chattr

```
chattr [+-=][ ASacdistu] 文 件 或 目 录 名 称
```

**+**：增 加 某 一 个 特 殊 参 数， 其 他 原 本 存 在 参 数 则 不 动。 

**-**：移 除 某 一 个 特 殊 参 数， 其 他 原 本 存 在 参 数 则 不 动。 

**=** ：设 置 一 定， 且 仅 有 后 面 接 的 参 数 

**A** ：当 设 置 了 A 这 个 属 性 时， 若 你 有 存 取 此 文 件（ 或 目 录） 时， 他 的 存 取 时 间 atime 将 不 会 被 修 改， 可 避 免 I/ O 较 慢 的 机 器 过 度 的 存 取 磁 盘。（ 目 前 建 议 使 用 文 件 系 统 挂 载 参 数 处 理 这 个 项 目） 

**S** ：一 般 文 件 是 非 同 步 写 入 磁 盘 的（ 原 理 请 参 考 前 一 章 sync 的 说 明）， 如 果 加 上 S 这 个 属 性 时， 当 你 进 行 任 何 文 件 的 修 改， 该 更 动 会“ 同 步” 写 入 磁 盘 中。 

**a** ：当 设 置 a 之 后， 这 个 文 件 将 只 能 增 加 数 据， 而 不 能 删 除 也 不 能 修 改 数 据， 只 有 root 才 能 设 置 这 属 性 

**c** ：这 个 属 性 设 置 之 后， 将 会 自 动 的 将 此 文 件“ 压 缩”， 在 读 取 的 时 候 将 会 自 动 解 压 缩， 但 是 在 储 存 的 时 候， 将 会 先 进 行 压 缩 后 再 储 存（ 看 来 对 于 大 文 件 似 乎 蛮 有 用 的！） 

**d** ：当 dump 程 序 被 执 行 的 时 候， 设 置 d 属 性 将 可 使 该 文 件（ 或 目 录） 不 会 被 dump 备 份 

**i** ：这 个 很 厉 害 ， 他 可 以 让 一 个 文 件“ 不 能 被 删 除、 改 名、 设 置 链 接 也 无 法 写 入 或 新 增 数 据” 对 于 系 统 安 全 性 有 相 当 大 的 助 益， 只 有 root 能 设 置 此 属 性

**s** ：当 文 件 设 置 了 s 属 性 时， 如 果 这 个 文 件 被 删 除， 他 将 会 被 完 全 的 移 除 出 这 个 硬 盘 空 间， 所 以 如 果 误 删 了， 完 全 无 法 救 回 来 了 

**u** ：与 s 相 反 的， 当 使 用 u 来 设 置 文 件 时， 如 果 该 文 件 被 删 除 了， 则 数 据 内 容 其 实 还 存 在 磁 盘 中， 可 以 使 用 来 救 援 该 文 件

注 意 1： 属 性 设 置 常 见 的 是 a 与 i 的 设 置 值， 而 且 很 多 设 置 值 必 须 要 身 为 root 才 能 设 置 

注 意 2： xfs 文 件 系 统 仅 支 持 AadiS 而 已



## 3.文件类型

```
file ~/. bashrc
```



## 4.指令与文件搜寻

### 4.1 指令搜寻：which

```
which [-a] command
```

**-a** ：将 所 有 由 **PATH** 目 录 中 可 以 找 到 的 指 令 均 列 出， 而 不 止 第 一 个 被 找 到 的 指 令 名 称



### 4.2 文件文件名的搜寻：whereis

在 Linux 下 面 也 有 相 当 优 异 的 搜 寻 指 令 , 通 常 find 不 很 常 用 , 因 为 速 度 慢 之 外， 也 很 消 耗 硬 盘！ 一 般 我 们 都 是 先 使 用 whereis 或 者 是 locate 来 检 查， 如 果 真 的 找 不 到 了， 才 以 find 来 搜 寻 。因 为 whereis 只 找 系 统 中 某 些 特 定 目 录 下 面 的 文 件 而 已， locate 则 是 利 用 数 据 库 来 搜 寻 文 件 名， 当 然 两 者 就 相 当 的 快 速， 并 且 没 有 实 际 的 搜 寻 硬 盘 内 的 文 件 系 统 状 态， 比 较 省 时 间 啦。

whereis 主 要 是 针 对 /bin /sbin 下 面 的 可 执 行 文 件， 以 及 /usr/ share/ man 下 面 的 man page 文 件， 跟 几 个 比 较 特 定 的 目 录 来 处 理 而 已。 所 以 速 度 当 然 快 的 多。

```
whereis [-bmsu] 文 件 或 目 录 名
```

**-l** :可 以 列 出 whereis 会 去 查 询 的 几 个 主 要 目 录 而 已 

**-b** :只 找 binary 格 式 的 文 件 

**-m** :只 找 在 说 明 文 档 manual 路 径 下 的 文 件 

**-s** :只 找 source 来 源 文 件 

**-u** :搜 寻 不 在 上 述 三 个 项 目 当 中 的 其 他 特 殊 文 件



### 4.3 文件文件名的搜寻：locate

```
locate [-ir] keyword
```

**-i** ：忽 略 大 小 写 的 差 异； 

**-c** ：不 输 出 文 件 名， 仅 计 算 找 到 的 文 件 数 量 

**-l** ：仅 输 出 几 行 的 意 思， 例 如 输 出 五 行 则 是 -l 5 

**-S** ：输 出 locate 所 使 用 的 数 据 库 文 件 的 相 关 信 息， 包 括 该 数 据 库 纪 录 的 文 件/ 目 录 数 量 等 

**-r** ：后 面 可 接 正 则 表 达 式 的 显 示 方 式



### 4.4 磁盘文件查询

```
find [PATH] [option] [action]
```

#### 4.4.1 与 时 间 有 关 的 选 项

**-mtime n** ：n 为 数 字， 意 义 为 在 n 天 之 前 的“ 一 天 之 内” 被 更 动 过 内 容 的 文 件； 

**-mtime + n** ：列 出 在 n 天 之 前（ 不 含 n 天 本 身） 被 更 动 过 内 容 的 文 件 文 件 名；

**-mtime -n** ：列 出 在 n 天 之 内（ 含 n 天 本 身） 被 更 动 过 内 容 的 文 件 文 件 名。

 **-newer file** ：file 为 一 个 存 在 的 文 件， 列 出 比 file 还 要 新 的 文 件 文 件 名



#### 4.4.2 与 使 用 者 或 群 组 名 称 有 关 的 参 数

**-uid n** ：n 为 数 字， 这 个 数 字 是 使 用 者 的 帐 号 ID， 亦 即 UID ，这 个 UID 是 记 录 在 /etc/ passwd 里 面 与 帐 号 名 称 对 应 的 数 字。 这 方 面 我 们 会 在 第 四 篇 介 绍。 

**-gid n** ：n 为 数 字， 这 个 数 字 是 群 组 名 称 的 ID， 亦 即 GID， 这 个 GID 记 录 在 /etc/ group

**-user name** ：name 为 使 用 者 帐 号 名 称 喔！ 例 如 dmtsai -group **name**：name 为 群 组 名 称 喔， 例 如 users ； 
**-nouser** ：寻 找 文 件 的 拥 有 者 不 存 在 /etc/ passwd 的 人 

**-nogroup** ：寻 找 文 件 的 拥 有 群 组 不 存 在 于 /etc/ group 的 文 件， 当 你 自 行 安 装 软 件 时， 很 可 能 该 软 件 的 属 性 当 中 并 没 有 文 件 拥 有 者， 这 是 可 能 的。 在 这 个 时 候， 就 可 以 使 用 -nouser 与 -nogroup 搜 寻。



#### 4.4.3 与 文 件 权 限 及 名 称 有 关 的 参 数 

**-name filename**： 搜 寻 文 件 名 称 为 filename 的 文 件； 

**-size [+-] SIZE**： 搜 寻 比 SIZE 还 要 大（ +） 或 小（-） 的 文 件。 这 个 SIZE 的 规 格 有： c: 代 表 Byte， k: 代 表 1024Bytes。 所 以， 要 找 比 50KB 还 要 大 的 文 	件， 就 是“ -size + 50k ”

**-type TYPE** ：搜 寻 文 件 的 类 型 为 TYPE 的， 类 型 主 要 有： 一 般 正 规 文 件 （f）, 设 备 文 件 （b, c）, 目 录 （d）, 链 接 文 件 （l）, socket （s）, 及 FIFO （p） 等 属 性。

**-perm mode** ：搜 寻 文 件 权 限“ 刚 好 等 于” mode 的 文 件， 这 个 mode 为 类 似 chmod 的 属 性 值， 举 例 来 说， -rwsr-xr-x 的 属 性 为 4755 

**-perm -mode** ：搜 寻 文 件 权 限“ 必 须 要 全 部 囊 括 mode 的 权 限” 的 文 件， 举 例 来 说， 我 们 要 搜 寻 -rwxr--r-- ，亦 即 0744 的 文 件， 使 用 -perm -0744， 当 一 个 文 件 的 权 限 为 -rwsr-xr-x ，亦 即 4755 时， 也 会 被 列 出 来， 因 为 -rwsr-xr-x 的 属 性 已 经 囊 括 了 -rwxr--r-- 的 属 性 了。

**-perm /mode** ：搜 寻 文 件 权 限“ 包 含 任 一 mode 的 权 限” 的 文 件， 举 例 来 说， 我 们 搜 寻 -rwxr-xr-x ，亦 即 -perm /755 时， 但 一 个 文 件 属 性